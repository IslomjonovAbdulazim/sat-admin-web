import{r as p,e as y,o as D,t as f,j as e,B as o,s as S,u as I}from"./index--PttCZWB.js";import{u as b,E as B,S as H,T as K,a as V,b as $,M as R}from"./top-nav-gqN7m17U.js";import{u as w,a as P,L as A,I as C}from"./label-DFywGouj.js";import{B as N}from"./badge-DvlS7RHt.js";import{H as U,S as Y,T as G,C as W,P as _}from"./config-drawer-47TCGBua.js";import{t as v}from"./tests-api-2lvwm28N.js";import{N as M,$ as J,O as E,Q as F,R as k,T as q,W as O,D as X,j as Z,k as ee,n as T,m as se,a0 as te,a1 as ae,a2 as ie,a3 as re,a4 as le,a5 as ne,a6 as oe,a7 as ce}from"./sign-out-dialog-BjgdDRrb.js";import{P as Q}from"./plus-Bx6WFtZK.js";import{E as de}from"./eye-DuaVr12y.js";import{D as me}from"./download-D8d-aPVa.js";import"./createLucideIcon-BRCbxnyo.js";const ue=D({title:S().min(1,"Title is required").max(200,"Title must be less than 200 characters")});function he({children:i,onSuccess:g}){const[c,d]=p.useState(!1),h=y(),{register:m,handleSubmit:u,formState:{errors:l},reset:x}=w({resolver:P(ue)}),n=b({mutationFn:t=>v.create(t),onSuccess:t=>{f.success(`Test "${t.title}" created successfully!`),h.invalidateQueries({queryKey:["tests"]}),d(!1),x(),g?.()},onError:t=>{const s=t.response?.data?.detail||"Failed to create test. Please try again.";f.error(s)}}),a=t=>{n.mutate(t)},j=t=>{t||x(),d(t)};return e.jsxs(M,{open:c,onOpenChange:j,children:[e.jsx(J,{asChild:!0,children:i}),e.jsxs(E,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(k,{children:"Create New Test"}),e.jsx(q,{children:"Create a new SAT practice test. You can add modules and questions after creating the test."})]}),e.jsxs("form",{onSubmit:u(a),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"title",children:"Test Title"}),e.jsx(C,{id:"title",placeholder:"SAT Practice Test 1",...m("title"),disabled:n.isPending}),l.title&&e.jsx("p",{className:"text-sm text-destructive",children:l.title.message})]}),e.jsxs(O,{children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:n.isPending,children:"Cancel"}),e.jsx(o,{type:"submit",disabled:n.isPending,children:n.isPending?"Creating...":"Create Test"})]})]})]})]})}const xe=D({title:S().min(1,"Title is required").max(200,"Title must be less than 200 characters")});function ge({test:i,open:g,onOpenChange:c,onSuccess:d}){const h=y(),{register:m,handleSubmit:u,formState:{errors:l},reset:x,setValue:n}=w({resolver:P(xe)});p.useEffect(()=>{i&&n("title",i.title)},[i,n]);const a=b({mutationFn:s=>{if(!i)throw new Error("No test selected");return v.update(i.id,s)},onSuccess:s=>{f.success(`Test "${s.title}" updated successfully!`),h.invalidateQueries({queryKey:["tests"]}),c(!1),d?.()},onError:s=>{const r=s.response?.data?.detail||"Failed to update test. Please try again.";f.error(r)}}),j=s=>{a.mutate(s)},t=s=>{s||x(),c(s)};return i?e.jsx(M,{open:g,onOpenChange:t,children:e.jsxs(E,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(k,{children:"Edit Test"}),e.jsx(q,{children:"Update the test information. Changes will be saved immediately."})]}),e.jsxs("form",{onSubmit:u(j),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"title",children:"Test Title"}),e.jsx(C,{id:"title",placeholder:"SAT Practice Test 1",...m("title"),disabled:a.isPending}),l.title&&e.jsx("p",{className:"text-sm text-destructive",children:l.title.message})]}),e.jsxs(O,{children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:a.isPending,children:"Cancel"}),e.jsx(o,{type:"submit",disabled:a.isPending,children:a.isPending?"Updating...":"Update Test"})]})]})]})}):null}function je({data:i,isLoading:g,onEdit:c,onViewModules:d,onRefresh:h}){const[m,u]=p.useState(!1),[l,x]=p.useState(null),n=y(),a=b({mutationFn:s=>v.delete(s),onSuccess:(s,r)=>{const L=i.find(z=>z.id===r)?.title||"Test";f.success(`${L} deleted successfully`),n.invalidateQueries({queryKey:["tests"]}),u(!1),x(null),h()},onError:s=>{const r=s.response?.data?.detail||"Failed to delete test. Please try again.";f.error(r)}}),j=s=>{x(s),u(!0)},t=()=>{l&&a.mutate(l.id)};return g?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading tests..."})}):i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-muted-foreground mb-4",children:"No tests found."}),e.jsxs(o,{onClick:h,children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Create Your First Test"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(s=>e.jsxs("div",{className:"border rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"default",children:"Active"}),e.jsxs(N,{variant:"outline",children:["ID #",s.id]})]})]}),e.jsxs(X,{children:[e.jsx(Z,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(B,{className:"h-4 w-4"})]})}),e.jsxs(ee,{align:"end",children:[e.jsxs(T,{onClick:()=>d(s),children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"View Modules"]}),e.jsxs(T,{onClick:()=>c(s),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(se,{}),e.jsxs(T,{onClick:()=>j(s),className:"text-destructive",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),e.jsx("div",{className:"space-y-3 mb-6",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"SAT Practice Test for comprehensive assessment and preparation"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>d(s),children:"View Modules"}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>c(s),children:"Edit"})]})]},s.id))}),e.jsx(te,{open:m,onOpenChange:u,children:e.jsxs(ae,{children:[e.jsxs(ie,{children:[e.jsx(re,{children:"Delete Test"}),e.jsxs(le,{children:['Are you sure you want to delete "',l?.title,'"? This will perform a soft delete and the test can be restored later.']})]}),e.jsxs(ne,{children:[e.jsx(oe,{disabled:a.isPending,children:"Cancel"}),e.jsx(ce,{onClick:t,disabled:a.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a.isPending?"Deleting...":"Delete"})]})]})})]})}function pe(){const i=I(),[g,c]=p.useState(null),[d,h]=p.useState(!1),[m,u]=p.useState(""),{data:l=[],isLoading:x,refetch:n}=V({queryKey:["tests"],queryFn:()=>v.list()}),a=l.filter(r=>r.title.toLowerCase().includes(m.toLowerCase())),j=r=>{c(r),h(!0)},t=r=>{i({to:"/tests/modules",search:{testId:r.id.toString()}})},s=()=>{n()};return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx($,{links:fe}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(Y,{}),e.jsx(G,{}),e.jsx(W,{}),e.jsx(_,{})]})]}),e.jsxs(R,{children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Tests Management"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Create and manage SAT practice tests and assessments"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(he,{onSuccess:s,children:e.jsxs(o,{size:"lg",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(Q,{className:"mr-2 h-5 w-5"}),"Add Test"]})})})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(C,{placeholder:"Search tests...",value:m,onChange:r=>u(r.target.value),className:"w-full"})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"h-4 w-4"}),"Export"]})})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",children:[e.jsxs("span",{children:["Showing ",a.length," of ",l.length," tests"]}),e.jsxs(N,{variant:"secondary",children:['Search: "',m,'"']}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>u(""),children:"Clear filters"})]}),e.jsx(je,{data:a,isLoading:x,onEdit:j,onViewModules:t,onRefresh:s})]}),e.jsx(ge,{test:g,open:d,onOpenChange:h,onSuccess:s})]})}const fe=[{title:"Tests",href:"/tests/tests",isActive:!0,disabled:!1},{title:"Modules",href:"/tests/modules",isActive:!1,disabled:!1},{title:"Questions",href:"/tests/questions",isActive:!1,disabled:!1}],Me=pe;export{Me as component};
